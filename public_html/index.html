<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Admin</title>
</head>
<body>
<div class="top">
    <br/>
    <table width="462">
        <tr>
            <th><a href="page1.html">Page 1</a></th>
            <th><a href="page2.html">Page 2</a></th>
            <th><a href="page3.html">Page 3</a></th>
        </tr>
    </table>
</div>
<button type="button" id="btn">Get my fingerprint</button>
<p>Your browser fingerprint: <strong id="fp"></strong></p>

<script src="js/fingerprint2.js"></script>
<script>
      Fingerprint2.get(function(components) {
        murmur = Fingerprint2.x64hash128(components.map(function (pair) { return pair.value }).join(), 31)
          var xhr = new XMLHttpRequest();
          var url = "/msg";
          xhr.open("POST", url, true);
          xhr.setRequestHeader("Content-Type", "application/json");
          xhr.onreadystatechange = function () {
              if (xhr.readyState === 4 && xhr.status === 200) {
                  document.querySelector("#fp").textContent =xhr.response;
              }
          };
          var currentdate = new Date();
          var datetime =  currentdate.getDate() + "-"
              + (currentdate.getMonth()+1)  + "-"
              + currentdate.getFullYear() + " "
              + currentdate.getHours() + ":"
              + currentdate.getMinutes() + ":"
              + currentdate.getSeconds();

          var data = JSON.stringify({"url": document.URL,"visitTimeStamp":datetime});
          xhr.send(data);
      })

    //}

    // var cancelId
    // var cancelFunction
    //
    // // see usage note in the README
    // if (window.requestIdleCallback) {
    //   cancelId = requestIdleCallback(fingerprintReport)
    //   cancelFunction = cancelIdleCallback
    // } else {
    //   cancelId = setTimeout(fingerprintReport, 500)
    //   cancelFunction = clearTimeout
    // }
    //
    // document.querySelector("#btn").addEventListener("click", function () {
    //   if (cancelId) {
    //     cancelFunction(cancelId)
    //     cancelId = undefined
    //   }
    //   fingerprintReport()
    //})
  </script>
</body>
</html>